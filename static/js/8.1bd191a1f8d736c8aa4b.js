webpackJsonp([8],{VlgL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Hzfl"),n=a("1CZe"),i=a("YaEn"),r=a("PJh5"),o=a.n(r),s=a("t4zo"),c=a.n(s),u=a("uXZL"),d=a.n(u),p=a("mtWM"),m=a.n(p),f={data:function(){return{search:"",edititem:{},editVisible:!1,fileitem:{},fileVisible:!1,currentPage:1,totalPage:1,departmentList:[{label:"部门1",value:"0"},{label:"部门2",value:"1"},{label:"部门3",value:"2"}],department:"",degreeList:[{label:"博士研究生",value:"1"},{label:"本科毕业生",value:"3"},{label:"硕士研究生",value:"2"},{label:"专科毕业生",value:"4"},{label:"其他",value:"5"}],degree:"",stime:[],etime:[],tableData:[],outtableData:[],multipleSelection:[]}},created:function(){this.getList()},mounted:function(){},watch:{department:function(e,t){this.getList()},stime:function(e,t){this.getList()},etime:function(e,t){this.getList()},degree:function(e,t){this.getList()},search:function(e,t){this.getList()}},components:{edit:l.a,file:n.a},methods:{getList:function(){var e=this;m()({url:"/list",params:{department:e.department,degree:e.degree,search:e.search,stime:""==e.stime?"":o()(e.stime[0]).format("YYYY-MM-DD")+","+o()(e.stime[1]).format("YYYY-MM-DD"),etime:""==e.etime?"":o()(e.etime[0]).format("YYYY-MM-DD")+","+o()(e.etime[1]).format("YYYY-MM-DD"),currentPage:e.currentPage}}).then(function(t){var a=t.data;e.tableData=a.data,e.totalPage=a.totalPage}).catch(function(e){console.log(e)})},Close_dialog:function(e){this.editVisible=!1,this.fileVisible=!1},handleSelectionChange:function(e){this.multipleSelection=e},filterSex:function(e,t){return t.sex===e},filterState:function(e,t){return t.state===e},add:function(){i.a.push({name:"tabs",params:{data:"0",index:1}})},handleEdit:function(e,t){i.a.push({name:"tabs",params:{data:t,index:1}})},handleDelete:function(e,t){"离职"!==t.state?this.$confirm("是否离职员工?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){m()({url:"/delete",params:{wid:t.wid}}).then(function(e){1===e.data.success?(this.$message({type:"success",message:"离职成功!"}),this.getList()):this.$message.error("操作失败!")}).catch(function(e){console.log(e)})}):this.$message.error("该员工已离职!")},handleCurrentChange:function(){this.getList()},outlist:function(){var e=this;m()({url:"/outlist",params:{department:e.department,degree:e.degree,search:e.search,stime:""==e.stime?"":o()(e.stime[0]).format("YYYY-MM-DD")+","+o()(e.stime[1]).format("YYYY-MM-DD"),etime:""==e.etime?"":o()(e.etime[0]).format("YYYY-MM-DD")+","+o()(e.etime[1]).format("YYYY-MM-DD")}}).then(function(t){var a=t.data;e.outtableData=a}).catch(function(e){console.log(e)}),exportExcel()},exportExcel:function(){var e=d.a.utils.table_to_book(document.querySelector("#out-table")),t=d.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{c.a.saveAs(new Blob([t],{type:"application/octet-stream"}),"user.xlsx")}catch(e){"undefined"!=typeof console&&console.log(e,t)}return t},download:function(){window.open("http://localhost:8080/download")}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-main",[a("div",{staticClass:"select"},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"部门"},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}},e._l(e.departmentList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"学历"},model:{value:e.degree,callback:function(t){e.degree=t},expression:"degree"}},e._l(e.degreeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"签约日期","end-placeholder":""},model:{value:e.stime,callback:function(t){e.stime=t},expression:"stime"}}),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"离职日期","end-placeholder":""},model:{value:e.etime,callback:function(t){e.etime=t},expression:"etime"}}),e._v(" "),a("el-input",{attrs:{placeholder:"姓名",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-document"}},[e._v("导入")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-document"},on:{click:function(t){return e.outlist()}}},[e._v("导出")]),e._v(" "),a("el-link",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.download()}}},[e._v("点击下载导入模板")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"","tooltip-effect":"dark","header-cell-style":{background:"#f5f7fa"},"default-sort":{prop:"wid",order:"descending"},data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wid",label:"工号","min-width":"100",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别","min-width":"100",filters:[{text:"男",value:"0"},{text:"女",value:"1"}],"filter-method":e.filterSex,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"0"===t.row.sex?"primary":"warning","disable-transitions":""}},[e._v(e._s("1"==t.row.sex?"女":"男"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"degree",label:"学历","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"部门","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话号码","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态","min-width":"100",filters:[{text:"在职",value:"在职"},{text:"离职",value:"离职"}],"filter-method":e.filterState,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top-start",width:"150",trigger:"hover",content:"签约时间："+t.row.signingTime+"离职时间："+t.row.departureTime}},[a("el-button",{staticClass:"bbb",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{type:"在职"===t.row.state?"success":"danger","disable-transitions":""}},[e._v(e._s(t.row.state))])],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"130",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("离职")])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"right","margin-top":"8px"},attrs:{background:"","current-page":e.currentPage,layout:"prev, pager, next","page-size":7,total:e.totalPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1),e._v(" "),a("edit",{attrs:{edititem:e.edititem,editVisible:e.editVisible},on:{"close-dialogStatus":e.Close_dialog}}),e._v(" "),a("file",{attrs:{fileitem:e.fileitem,fileVisible:e.fileVisible},on:{"close-dialogStatus":e.Close_dialog}}),e._v(" "),a("el-table",{attrs:{id:"out-table",data:e.outtableData,height:"0"}},[a("el-table-column",{attrs:{prop:"wid",label:"工号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"degree",label:"学历"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话号码"}})],1)],1)},staticRenderFns:[]};var h=a("VU/8")(f,b,!1,function(e){a("YwzX")},"data-v-080c2c8e",null);t.default=h.exports},YwzX:function(e,t){}});
//# sourceMappingURL=8.1bd191a1f8d736c8aa4b.js.map